---
title: 89C51与AD0832波形输出
date: 2017-07-18 21:39:10
categories: 
- 电子
- 单片机
tags: [单片机,技术,电子]
copyright: true
reward: true
---

原文是来自我的CSDN博客，用于迁移测试，练习Markdown

本次实验通过proteus仿真
仿真电气连接图：
![electricconnection](https://github.com/qy19941014/blogimage/raw/master/img/2017.7.18.1.jpg)
<!-- more -->
本次实验通过keil编译通过，实验程序如下：
```c
#include <absacc.h>  
#include <reg52.h>  
 
#define DA0832 XBYTE[0xfffe]  

#define uchar unsigned char  
#define uint unsigned int  

sbit S1 = P1^0;  
sbit S2 = P1^1;  
//00锯齿波；01方波；10三角波；11正弦波  

 uchar code sin_tab[] =        //正弦波输出表  
{  
    0x80,0x83,0x86,0x89,0x8D,0x90,0x93,0x96,0x99,0x9C,0x9F,0xA2,0xA5,0xA8,0xAB,0xAE,  
    0xB1,0xB4,0xB7,0xBA,0xBC,0xBF,0xC2,0xC5,0xC7,0xCA,0xCC,0xCF,0xD1,0xD4,0xD6,0xD8,  
    0xDA,0xDD,0xDF,0xE1,0xE3,0xE5,0xE7,0xE9,0xEA,0xEC,0xEE,0xEF,0xF1,0xF2,0xF4,0xF5,  
    0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFD,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,  
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFE,0xFD,0xFD,0xFC,0xFB,0xFA,0xF9,0xF8,0xF7,0xF6,  
    0xF5,0xF4,0xF2,0xF1,0xEF,0xEE,0xEC,0xEA,0xE9,0xE7,0xE5,0xE3,0xE1,0xDF,0xDD,0xDA,  
    0xD8,0xD6,0xD4,0xD1,0xCF,0xCC,0xCA,0xC7,0xC5,0xC2,0xBF,0xBC,0xBA,0xB7,0xB4,0xB1,  
    0xAE,0xAB,0xA8,0xA5,0xA2,0x9F,0x9C,0x99,0x96,0x93,0x90,0x8D,0x89,0x86,0x83,0x80,  
    0x80,0x7C,0x79,0x76,0x72,0x6F,0x6C,0x69,0x66,0x63,0x60,0x5D,0x5A,0x57,0x55,0x51,  
    0x4E,0x4C,0x48,0x45,0x43,0x40,0x3D,0x3A,0x38,0x35,0x33,0x30,0x2E,0x2B,0x29,0x27,  
    0x25,0x22,0x20,0x1E,0x1C,0x1A,0x18,0x16,0x15,0x13,0x11,0x10,0x0E,0x0D,0x0B,0x0A,  
    0x09,0x08,0x07,0x06,0x05,0x04,0x03,0x02,0x02,0x01,0x00,0x00,0x00,0x00,0x00,0x00,  
    0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x02,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,  
    0x0A,0x0B,0x0D,0x0E,0x10,0x11,0x13,0x15,0x16,0x18,0x1A,0x1C,0x1E,0x20,0x22,0x25,  
    0x27,0x29,0x2B,0x2E,0x30,0x33,0x35,0x38,0x3A,0x3D,0x40,0x43,0x45,0x48,0x4C,0x4E,  
    0x51,0x55,0x57,0x5A,0x5D,0x60,0x63,0x66,0x69,0x6C,0x6F,0x72,0x76,0x79,0x7C,0x7E  
};  
  
void Delay_MS(uint);// delay   
void stair(uchar AMP);//锯齿波   
void square(uchar AMP, uchar THL,uchar TLL);//方波   
void trian(uchar AMP);//三角波   
void sin();//正弦波   
void scan();//扫描函数   
  
  
void main()  
{     
    while(1)  
    {  
        //逐个测试   
        //stair(200);  
        //square(200,10,10);  
        //trian(200);  
        //sin();  
        scan();  
    }  
}  
  
void scan()  
{  
    if((0 == S1) &&(0 == S2))  
        stair(200);  
    else if((1 == S1) && (0 == S2))  
        square(200,10,10);  
    else if((0 == S1) && (1 == S2))  
        trian(200);  
    else  
        sin();  
          
          
      
}  
void Delay_MS(uint n)  
{  
    uint k;  
    for(n; n  >0 ;n--)  
        for(k = 10; k > 0 ;k--);  
}  
  
void stair(uchar AMP)  
{  
    uchar i;  
    for(i = 0 ;i < 255; i++)  
    {  
        DA0832 = i;  
    }  
       
}  
  
void square(uchar AMP, uchar THL, uchar TLL)  
{  
    DA0832 = 255 - AMP;  
    Delay_MS(THL);  
    DA0832 = 255;  
    Delay_MS(TLL);  
}  
  
void trian(uchar AMP)  
{  
    uchar i;  
    for(i = 255 - AMP ;i < 255; i++)  
    {  
        DA0832 = i;  
    }  
      
    for(i-1 ;i > 255 - AMP; i--)  
    {  
        DA0832 = i;  
    }  
}  
  
void sin()  
{  
    uchar i;  
    for(i = 0; i < 255; i++)  
    {  
        DA0832 = sin_tab[i];  
    }  
}   
```

其仿真输出如图所示：
正弦波:
![sinwave](https://github.com/qy19941014/blogimage/raw/master/img/2017.7.18.2.jpg)
三角波:
![tranwave](https://github.com/qy19941014/blogimage/raw/master/img/2017.7.18.3.jpg)
方波：
![squrewave](https://github.com/qy19941014/blogimage/raw/master/img/2017.7.18.4.jpg)
锯齿波：
![sawtwave](https://github.com/qy19941014/blogimage/raw/master/img/2017.7.18.5.jpg)

